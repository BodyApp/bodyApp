<div ng-include="'components/navbar/navbar.html'" class="mb70 mb-sm-48"></div>

<div class="studio-sorter pt48 pb48 pt-xs-24 pb-xs-16">
  <div class="page-container-responsive">
    <div class="row">
      <div class="col-md-12">
        <div class="sorter-text">
          Show me
          <div class="select">
            <select ng-model = "categoryFilter">
              <option value = "">All</option>
              <option value = "strength">Strength</option>
              <option value = "hiit">HIIT</option>
              <option value = "yoga">Yoga</option>
              <option value = "dance">Dance</option>
              <option value = "boxing">Boxing</option>
              <option value = "pilates">Pilates</option>
              <option value = "barre">Barre</option>
              <option value = "martialArts">Martial Arts</option>
              <option value = "meditation">Meditation</option>
              <option value = "nutrition">Nutrition</option>
            </select>
          </div>
          <div class="select">
            <select ng-model = "classesVsStudios">
              <option value = "classes">classes</option>
              <option value = "studios">studios</option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="calendar-selector pt24 pb24">
  <div class="week-changer text-center">
    <i class="ti-angle-left"></i>
  </div><!--
--><div class="calendar-selector-days text-center">
    <ul>
      <li href="#" class="cal-select-active">Show All</li><!-- 
   --><li href="#">Tue 7/26</li><!-- 
   --><li href="#">Wed 7/27</li><!-- 
   --><li href="#">Thu 7/28</li><!-- 
   --><li href="#">Fri 7/29</li><!-- 
   --><li href="#">Sat 7/60</li><!-- 
   --><li href="#">Sun 7/31</li><!-- 
   --><li href="#">Mon 8/01</li>
    </ul>
  </div><!--
--><div class="week-changer text-center">
    <i class="ti-angle-right cal-select-active"></i>
  </div>
</div>

<div class="class-listings pt16 pb24" ng-show = "classesVsStudios === 'classes'">
  <div class="page-container-responsive">
    <div class="row mb16">
      <div class="col-xs-12 text-center">
        <h3 class="semibold">Upcoming Classes</h3>
        <h5 class="lightgray">Times in EST</h5>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12">
        <ul class="class-list-date" ng-repeat = "day in days" ng-hide = "!upcomingClasses[day]">
          <li ng-repeat = "instance in classes=(upcomingClasses[day] | filter:filterByCategory()) | orderBy:'dateTime'" ng-show = "!categoryFilter || studios[instance.studioId].categories[categoryFilter]">
            <div class="row">
              <div class="col-xs-3 shrink-col-width disc-col">
                <h4 class="royalblue hidden-xs mb8">{{getDate(day)}}, {{getTime(instance.dateTime)}}</h4>
                <h4 class="royalblue visible-xs mb8">{{getTime(instance.dateTime)}}</h4>
                <h5 class="lightgray visible-xs mb8">{{getDate(day)}}</h5>
                <h5 class="lightgray mb8">{{instance.duration}} min</h5>
                <div class="disc-instr-photo visible-xs">
                  <img class="round-photo" ng-if = "!instructors[instance.instructor].addedPicture" ng-src="https://graph.facebook.com/{{instructors[instance.instructor].facebookId}}/picture?width=40&height=40">
                  <img class="round-photo" ng-if = "instructors[instance.instructor].addedPicture" ng-src="{{instructors[instance.instructor].addedPicture}}" height="40" width="40">
                </div>
                <div class="disc-instr-photo hidden-xs visible-sm">
                  <img class="round-photo" ng-if = "!instructors[instance.instructor].addedPicture" ng-src="https://graph.facebook.com/{{instructors[instance.instructor].facebookId}}/picture?width=60&height=60">
                  <img class="round-photo" ng-if = "instructors[instance.instructor].addedPicture" ng-src="{{instructors[instance.instructor].addedPicture}}" height="60" width="60">
                </div>
              </div>
              <div class="col-xs-7 expand-col-width disc-col">
                <div class="disc-instr-photo hidden-sm hidden-xs">
                  <img class="round-photo" ng-if = "!instructors[instance.instructor].addedPicture" ng-src="https://graph.facebook.com/{{instructors[instance.instructor].facebookId}}/picture?width=60&height=60">
                  <img class="round-photo" ng-if = "instructors[instance.instructor].addedPicture" ng-src="{{instructors[instance.instructor].addedPicture}}" height="60" width="60">
                </div><!-- 
             --><div class="disc-class-details">
                  <div class="inline-block disc-class-title" ng-click = "showClassInfo[instance.classType] = !showClassInfo[instance.classType]; trackEvent('showClassInfoClicked', {studioId: instance.studioId, classId: instance.dateTime})">
                    <h4 class="royalblue hover-highlight disc-class-details-title mb8">{{classTypes[instance.classType].name}}</h4>
                  </div>
                  <div class="inline-block category-group disc-class-details-tags hidden-sm hidden-xs">
                    <a ng-click = "setCategoryFilter(tag)" class="btn-tag inline-block mb16" ng-repeat = "(tag, trueFalse) in studios[instance.studioId].categories">{{tag}}</a>
                  </div>
                  <div class="display-block">
                    <h5 class="lightgray">{{instructors[instance.instructor].firstName}} {{instructors[instance.instructor].lastName}} with {{studios[instance.studioId].studioName}}</h5>
                  </div>
                  <div class="inline-block category-group disc-class-details-tags visible-sm visible-xs mt16 mt-xs-8">
                    <a ng-click = "setCategoryFilter(tag)" class="btn-tag inline-block mb16 mb-xs-0" ng-repeat = "(tag, trueFalse) in studios[instance.studioId].categories">{{tag}}</a>
                  </div>
                  <div class="discovery-tag-group mt16 mt-sm-8 mt-xs-8">
                    <div class="discovery-tag-price">
                      <span class="bold">${{studios[instance.studioId].dropinPricing/100}} / class</span>
                    </div>
                    <div class="discovery-tag-price">
                      <span class="bold">$20 unlimited</span>
                    </div>
                    <div class="discovery-tag-love">
                      <i class="fa fa-heart"></i> Studio We Love
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xs-2 cta-col disc-col">
                <a href="#" class="btn-blue disc-btn btn-full-width" ng-href="/studios/{{instance.studioId}}/classinfo/{{instance.dateTime}}">View Class</a>
                <a href="#" class="btn disc-btn btn-full-width mt8">Go to Studio</a>
                <div class="social-bookings text-center mt8 mb8 hidden-xs">
                  <ul class="mb8">
                    <li>
                      <img class="round-photo" src="/assets/images/justin-photo.jpg" width="25" height="25">
                    </li>
                    <li>
                      <div class="empty-booking-user">
                        <span class="circular-button-label">
                          <svg class="svgIcon " viewBox="0 0 32 32" title="invite people">
                            <polygon points="28,14 18,14 18,4 14,4 14,14 4,14 4,18 14,18 14,28 18,28 18,18 28,18"></polygon>
                          </svg>
                        </span>
                      </div>
                    </li>
                    <li>
                      <div class="empty-booking-user">
                        <span class="circular-button-label">
                          <svg class="svgIcon " viewBox="0 0 32 32" title="invite people">
                            <polygon points="28,14 18,14 18,4 14,4 14,14 4,14 4,18 14,18 14,28 18,28 18,18 28,18"></polygon>
                          </svg>
                        </span>
                      </div>
                    </li>
                  </ul>
                  <p class="lightgray text-center hidden">8 bookings</p>
                  <a href="#" class="book-first lightgray"><i class="fa fa-flag-checkered"></i> book first</a>
                </div>
              </div>
            </div>
            <div class="row mt8" ng-show = "showClassInfo[instance.classType]" ng-href = "/studios/{{instance.studioId}}">
              <div class="col-xs-3 shrink-col-width"></div>
              <div class="col-xs-9">
                <div class="row">
                  <div class="col-xs-4">
                    <img ng-src="{{studioPictures[instance.studioId]}}" width="100%">
                  </div>
                  <div class="col-xs-8">
                    <p class="lightgray">{{classTypes[instance.classType].classDescription}}</p>
                    <div class="mt16">
                      <span class="bold">You'll Need:</span> 
                      <span class="lightgray" ng-if = "!classTypes[instance.classType].equipment">No equipment</span>
                      <ul class="disc-equipment-list">
                        <li class="lightgray" ng-repeat = "equipment in classTypes[instance.classType].equipment">{{equipment.name.trunc(20, true)}}</li>
                      </ul>
                    </div>
                    <a href="#" class="btn mt16"><i class="fa fa-heart"></i> Follow {{studios[instance.studioId].studioName}}</a>
                  </div>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>

  </div>
</div>

<!-- <div class="class-listings pt48 pb48" ng-show = "classesVsStudios === 'classes'">
  <div class="page-container-responsive">
    
    <div class="row mb24">
      <div class="col-xs-12 text-center">
        <h2>Upcoming Classes for {{today}} - {{sevenDaysFromNow}}</h2>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12">
        <ul class="class-list-date"> -->
          <!-- <li ng-repeat = "(day, value) in upcomingClasses | orderObjectBy:day:true">
          <li ng-repeat = "day in days" ng-hide = "!upcomingClasses[day]"> 
            <div class="row">
              <div class="col-sm-2 hidden-xs">
                <h3 class="mb0">{{getDayOfWeek(day)}}</h3>
                <h3 class="mb0">{{getDate(day)}}</h3>
              </div>
              <div class="mb16 col-xs-12 visible-xs text-center">
                <h2 class="mb0 bold">{{getFullDate(day)}}</h2>
              </div>
              <div class="col-sm-10">
                <ul class="class-list-info"> -->
                  <!-- <li ng-repeat = "instance in upcomingClasses[day] | orderBy:'dateTime'" ng-show = "!categoryFilter || studios[instance.studioId].categories[categoryFilter]">
                   <li ng-repeat = "instance in classes=(upcomingClasses[day] | filter:filterByCategory()) | orderBy:'dateTime'" ng-show = "!categoryFilter || studios[instance.studioId].categories[categoryFilter]"> --> <!-- REPEAT THIS FOR ALL TIMES DURING DAY -->
                    <!-- <li ng-repeat = "instance in upcomingClasses[day][time] | orderBy:'dateTime'" > -->
                     <!--  <div ng-show = "!instance">No upcoming {{categoryFilter}} classes</div>
                      <div class="row mb-xs-8">
                        <div class="col-xs-7">
                          <h3>{{getTime(instance.dateTime)}} ({{instance.duration}} min)</h3>
                        </div>
                        <div class="col-xs-5 text-right">
                          <a ng-href="/studios/{{instance.studioId}}/classinfo/{{instance.dateTime}}" class="btn-blue hidden-xs">View Class</a>
                          <a ng-href="/studios/{{instance.studioId}}/classinfo/{{instance.dateTime}}" class="btn-blue btn-collapse visible-xs">View Class</a>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-12">
                          <div class="row text-center-xs">
                            <div class="col-sm-12">
                              <a href="#" ng-click = "showClassInfo[instance.classType] = !showClassInfo[instance.classType]; trackEvent('showClassInfoClicked', {studioId: instance.studioId, classId: instance.dateTime})"><h4 class="lightgray mb8">{{classTypes[instance.classType].name}} by {{studios[instance.studioId].studioName}} <i class="fa fa-caret-down"></i></h4></a>
                              <div class="display-block mb8">
                                <a ng-click = "setCategoryFilter(tag)" class="btn-tag inline-block" ng-repeat = "(tag, trueFalse) in studios[instance.studioId].categories">{{tag}}</a>
                              </div>
                            </div>
                          </div>
                          <a class="row mb8" ng-show = "showClassInfo[instance.classType]" ng-href = "/studios/{{instance.studioId}}">  --><!-- SHOW THIS WHEN CARET-DOWN CLICKED -->
                            <!-- <div class="col-sm-4">
                              <img ng-src="{{studioPictures[instance.studioId]}}" width="100%">
                            </div>
                            <div class="col-sm-8">
                              <h5 class="lightgray mt-xs-8">{{classTypes[instance.classType].classDescription}}</h5>
                            </div>
                          </a>
                        </div>
                      </div>
                      <div class="row mt8">
                        <div class="col-xs-7 col-sm-4">
                          <div class="row">
                            <div class="col-xs-6 col-sm-5 col-md-5">
                              <img class="round-photo" ng-if = "!instructors[instance.instructor].addedPicture" ng-src="https://graph.facebook.com/{{instructors[instance.instructor].facebookId}}/picture?width=85&height=85">
                              <img class="round-photo" ng-if = "instructors[instance.instructor].addedPicture" ng-src="{{instructors[instance.instructor].addedPicture}}" height="85" width="85">
                            </div>
                            <div class="col-xs-6 col-sm-7 col-md-7">
                              <h5>Instructor</h5>
                              <h5 class="lightgray">{{instructors[instance.instructor].firstName}} {{instructors[instance.instructor].lastName}}</h5>
                            </div>
                          </div>
                        </div>
                        <div class="col-sm-2 hidden-xs">
                          <h5>Price</h5>
                          <h5 class="lightgray" ng-show = "!currentUser._id && instance.typeOfClass === 'Regular'">Free During Trial</h5>
                          <h5 class="lightgray" ng-show = "currentUser._id && instance.typeOfClass === 'Regular' && studios[instance.studioId].dropinPricing && !trialPeriodTime">${{studios[instance.studioId].dropinPricing/100}}</h5>
                          <h5 class="lightgray" ng-show = "currentUser._id && instance.typeOfClass === 'Regular' && !studios[instance.studioId].dropinPricing && !trialPeriodTime">$3</h5>
                          <h5 class="lightgray" ng-show = "currentUser._id && instance.typeOfClass === 'Regular' && trialPeriodTime">Free During Trial</h5>
                          <h5 class="lightgray" ng-show = "instance.typeOfClass === 'Specialty'">${{classTypes[instance.classType].specialtyClassRate}}</h5> -->
                          <!-- <h5 class="lightgray">{{instance.duration}} min</h5> -->
                          <!-- <h5 class="lightgray">{{instance.duration}} min</h5> --><!-- 
                        </div>
                        <div class="col-xs-5 col-sm-2">
                          <h5>Equipment</h5>
                          <h5 class="lightgray" ng-if = "!classTypes[instance.classType].equipment">None</h5>
                          <div ng-repeat = "equipment in classTypes[instance.classType].equipment">
                            <h5 class="lightgray" ng-if = "$index < 3">{{equipment.name.trunc(15, true)}}</h5>
                          </div>
                        </div>
                  </li>
                </ul>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>

  </div>
</div> -->


<div class="studio-listings pt48 pb48" ng-show = "classesVsStudios === 'studios'">
  <div class="page-container-responsive">
    <div class="row">

      <div class="col-sm-6 col-md-4 studio-listings-card" ng-repeat = "studio in studios | filterStudiosObject: categoryFilter"> <!-- Studio Listing -->
         <a href="/studios/{{studio.studioId}}">
          <div class="panel">
            <div class="studio-listing-container">
              <div class="studio-listing-image" ng-style="{'background-image':'url('+ studioPictures[studio.studioId] +')'}">
                <div class="studio-listing-tags text-center">
                  <span ng-repeat = "(category, active) in studio.categories" ng-show = "active">
                    #{{category}}
                  </span>
                </div>
                <!-- <img ng-src="{{studioPictures[studio.studioId]}}"> -->
              </div>
              <div class="panel-body studio-listing-card-body">
                <!-- <div class="studio-listing-stars">
                </div> -->
                <h4>{{studio.studioName}}</h4>
                <h5 class="lightgray">By {{studio.ownerName}}</h5>
                <h5 class="mt8 studio-listing-description">{{studio.shortDescription}}</h5>
                <div class="studio-listing-pricing mt16" ng-if = "studio.subscriptionPricing || studio.dropinPricing">
                  <div class="studio-listing-subscription">
                    <span class="royalblue">Subscription</span>
                    <h4 ng-if = "studio.subscriptionPricing">${{studio.subscriptionPricing/100}}<span class="perMonth">/mo</span></h4>
                    <h4 ng-if = "!studio.subscriptionPricing">None</h4>
                  </div>
                  <div class="studio-listing-dropIn">
                    <span class="royalblue">Drop In</span>
                    <h4 ng-if = "studio.dropinPricing">${{studio.dropinPricing/100}}</h4>
                    <h4 ng-if = "!studio.dropinPricing">None</h4>
                  </div>
                </div>
                <div class="studio-listing-pricing mt16" ng-if = "!studio.subscriptionPricing && !studio.dropinPricing">
                  <h4 class = "mt32"> Free Classes</h4>
                </div>
              </div>
            </div>
          </div>
        </a>
      </div>

    </div>
  </div>
</div>

<div ng-include="'components/footer/footer.html'"></div>