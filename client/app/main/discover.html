<div ng-include="'components/navbar/navbar.html'" class="mb70 mb-sm-48"></div>

<div class="studio-sorter pt48 pb48">
  <div class="page-container-responsive">
    <div class="row">
      <div class="col-md-12">
        <div class="sorter-text">
          Show me
          <div class="select">
            <select ng-model = "categoryFilter">
              <option value = "">All</option>
              <option value = "strength">Strength</option>
              <option value = "hiit">HIIT</option>
              <option value = "yoga">Yoga</option>
              <option value = "dance">Dance</option>
              <option value = "boxing">Boxing</option>
              <option value = "pilates">Pilates</option>
              <option value = "barre">Barre</option>
              <option value = "martialArts">Martial Arts</option>
              <option value = "meditation">Meditation</option>
              <option value = "nutrition">Nutrition</option>
            </select>
          </div>
          <div class="select">
            <select ng-model = "classesVsStudios">
              <option value = "classes">classes</option>
              <option value = "studios">studios</option>
            </select>
          </div><!-- sorted by
          <div class="select">
            <select>
              <option>Magic</option>
              <option>Popularity</option>
              <option>Newest</option>
              <option>Most subscribers</option>
              <option>Top grossing</option>
            </select>
          </div> -->
<!--           from
          <div class="select">
            <select>
              <option>Earth</option>
              <option>North America</option>
              <option>South America</option>
              <option>Europe</option>
              <option>Asia</option>
              <option>Australia</option>
            </select>
          </div> -->
        </div class="sorter-text">
      </div>
    </div>
  </div>
</div>

<div class="class-listings pt48 pb48" ng-show = "classesVsStudios === 'classes'">
  <div class="page-container-responsive">
    
    <div class="row mb24">
      <!-- <div class="col-xs-1 text-left">
        <i class="fa fa-caret-left" style="font-size:30px; line-height:55px;"></i>
      </div> -->
      <div class="col-xs-12 text-center">
        <h2>Upcoming Classes for Today - {{sevenDaysFromNow}}</h2>
      </div>
      <!-- <div class="col-xs-1 text-right">
        <i class="fa fa-caret-right" style="font-size:30px; line-height:55px;"></i>
      </div> -->
    </div>

    <div class="row">
      <div class="col-xs-12">
        <ul class="class-list-date">
          <li ng-repeat = "(day, value) in upcomingClasses | orderBy:'dateTime'"> <!-- REPEAT THIS FOR ALL DAYS -->
            <div class="row">
              <div class="col-sm-2 hidden-xs">
                <h3 class="mb0">{{getDayOfWeek(day)}}</h3>
                <h3 class="mb0">{{getDate(day)}}</h3>
              </div>
              <div class="mb16 col-xs-12 visible-xs text-center">
                <h2 class="mb0 bold">{{getFullDate(day)}}</h2>
              </div>
              <div class="col-sm-10">
                <ul class="class-list-info">
                  <div ng-repeat = "(time, value) in upcomingClasses[day]"> <!-- REPEAT THIS FOR ALL TIMES DURING DAY -->
                    <li ng-repeat = "instance in upcomingClasses[day][time]" ng-show = "!categoryFilter || studios[instance.studioId].categories[categoryFilter]" >
                      <div class="row mb-xs-8">
                        <div class="col-xs-7">
                          <h3>{{getTime(time)}} ({{instance.duration}} min)</h3>
                        </div>
                        <div class="col-xs-5 text-right">
                          <a href="/studios/{{instance.studioId}}" class="btn-blue hidden-xs">Learn More</a>
                          <a href="/studios/{{instance.studioId}}" class="btn-blue btn-collapse visible-xs">Learn More</a>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-12">
                          <div class="row text-center-xs">
                            <div class="col-sm-12">
                              <a href="#" ng-mouseenter = "showClassInfo[instance.classType] = true;" ng-mouseleave = "showClassInfo[instance.classType] = false;"><h4 class="lightgray mb8">{{classTypes[instance.classType].name}} by {{studios[instance.studioId].studioName}} <i class="fa fa-caret-down"></i></h4></a>
                              <div class="display-block mb8">
                                <a ng-click = "setCategoryFilter(tag)" class="btn-tag inline-block" ng-repeat = "(tag, trueFalse) in studios[instance.studioId].categories">{{tag}}</a>
                                <!-- <a href="" class="btn-tag inline-block">Barre</a> -->
                              </div>
                            </div>
                          </div>
                          <div class="row mb8" ng-show = "showClassInfo[instance.classType]"> <!-- SHOW THIS WHEN CARET-DOWN CLICKED -->
                            <div class="col-sm-4">
                              <img ng-src="{{studioPictures[instance.studioId]}}" width="100%">
                            </div>
                            <div class="col-sm-8">
                              <h5 class="lightgray mt-xs-8">{{classTypes[instance.classType].classDescription}}</h5>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row mt8">
                        <div class="col-xs-8 col-sm-4">
                          <div class="row">
                            <div class="col-xs-4 col-sm-4 col-md-3">
                              <img class="round-photo" ng-src="https://graph.facebook.com/{{instructors[instance.instructor].facebookId}}/picture?width=45&height=45">
                            </div>
                            <div class="col-xs-8 col-sm-8 col-md-9">
                              <h5>Instructor</h5>
                              <h5 class="lightgray">{{instructors[instance.instructor].firstName}} {{instructors[instance.instructor].lastName}}</h5>
                            </div>
                          </div>
                        </div>
                        <div class="col-sm-2 hidden-xs">
                          <h5>Duration</h5>
                          <h5 class="lightgray">{{instance.duration}} min</h5>
                        </div>
                        <!-- <div class="col-sm-2">
                          <h5>Open To</h5>
                          <h5 class="lightgray">All</h5>
                        </div> -->
                        <div class="col-xs-4 col-sm-2">
                          <h5>Equipment</h5>
                          <h5 class="lightgray" ng-if = "!classTypes[instance.classType].equipment">None</h5>
                          <div ng-repeat = "equipment in classTypes[instance.classType].equipment">
                            <h5 class="lightgray">{{equipment.name}}</h5>
                          </div>
                        </div>
                      </div>
                    </li>
                  </div>
                </ul>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>

  </div>
</div>

<div class="studio-listings pt48 pb48" ng-show = "classesVsStudios === 'studios'">
  <div class="page-container-responsive">
    <div class="row">

      <div class="col-sm-6 col-md-4 studio-listings-card" ng-repeat = "studio in studios | filterByCategory: categoryFilter"> <!-- Studio Listing -->
         <a href="/studios/{{studio.studioId}}">
          <div class="panel">
            <div class="studio-listing-container">
              <div class="studio-listing-image" ng-style="{'background-image':'url('+ studioPictures[studio.studioId] +')'}">
                <div class="studio-listing-tags text-center">
                  <span ng-repeat = "(category, active) in studio.categories" ng-show = "active">
                    #{{category}}
                  </span>
                </div>
                <!-- <img ng-src="{{studioPictures[studio.studioId]}}"> -->
              </div>
              <div class="panel-body studio-listing-card-body">
                <!-- <div class="studio-listing-stars">
                </div> -->
                <h4>{{studio.studioName}}</h4>
                <h5 class="lightgray">By {{studio.ownerName}}</h5>
                <h5 class="mt8 studio-listing-description">{{studio.shortDescription}}</h5>
                <div class="studio-listing-pricing mt16" ng-if = "studio.subscriptionPricing || studio.dropinPricing">
                  <div class="studio-listing-subscription">
                    <span class="royalblue">Subscription</span>
                    <h4 ng-if = "studio.subscriptionPricing">${{studio.subscriptionPricing/100}}<span class="perMonth">/mo</span></h4>
                    <h4 ng-if = "!studio.subscriptionPricing">None</h4>
                  </div>
                  <div class="studio-listing-dropIn">
                    <span class="royalblue">Drop In</span>
                    <h4 ng-if = "studio.dropinPricing">${{studio.dropinPricing/100}}</h4>
                    <h4 ng-if = "!studio.dropinPricing">None</h4>
                  </div>
                </div>
                <div class="studio-listing-pricing mt16" ng-if = "!studio.subscriptionPricing && !studio.dropinPricing">
                  <h4 class = "mt32"> Free Classes</h4>
                </div>
              </div>
            </div>
          </div>
        </a>
      </div>

    </div>
  </div>
</div>

<div ng-include="'components/footer/footer.html'"></div>